<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>康复计划 - 医疗设备管理APP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            min-height: 100vh;
            padding: 2rem;
        }
        .device-container {
            display: grid;
            grid-template-columns: repeat(4, 390px);
            gap: 40px;
            padding: 40px;
            max-width: 1800px;
            margin: 0 auto;
        }
        .device-label {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2d3748;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .device-frame {
            width: 390px;
            height: 844px;
            border-radius: 55px;
            background: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1),
                        0 0 0 1px rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 12px solid #1a1a1a;
        }
        .content-area {
            height: calc(100% - 127px);
            overflow-y: auto;
            background: linear-gradient(180deg, #ffffff 0%, #f8faff 100%);
        }
        .bottom-tab-bar {
            height: 83px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(229,231,235,0.5);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }
        .status-bar {
            height: 44px;
            background: #000;
            color: white;
            padding: 0 20px;
        }
        .tab-item {
            cursor: pointer;
            padding: 8px;
            transition: all 0.3s;
        }
        .tab-item:hover {
            color: #8B5CF6;
        }
        .tab-item.active {
            color: #8B5CF6;
        }
        /* 设备按钮样式 */
        .device-button {
            position: absolute;
            background: #1a1a1a;
            z-index: 2;
        }
        .power-button {
            right: -14px;
            top: 180px;
            width: 3px;
            height: 50px;
            border-radius: 0 2px 2px 0;
        }
        .volume-up {
            left: -14px;
            top: 150px;
            width: 3px;
            height: 40px;
            border-radius: 2px 0 0 2px;
        }
        .volume-down {
            left: -14px;
            top: 200px;
            width: 3px;
            height: 40px;
            border-radius: 2px 0 0 2px;
        }
        /* 动态岛样式 */
        .dynamic-island {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 25px;
            background: linear-gradient(180deg, #000000 0%, #1a1a1a 100%);
            border-radius: 20px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        /* 进度条样式 */
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background-color: #e5e7eb;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6 0%, #EC4899 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        /* 训练项目卡片 */
        .exercise-card {
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .exercise-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* 编辑模式样式 */
        .edit-mode {
            border: 2px dashed #8B5CF6;
            background-color: rgba(139, 92, 246, 0.05);
        }
        /* 拖动手柄 */
        .drag-handle {
            cursor: move;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="device-container">
        <div>
            <div class="device-label">康复计划</div>
            <div class="device-frame">
                <div class="dynamic-island"></div>
                <div class="device-button power-button"></div>
                <div class="device-button volume-up"></div>
                <div class="device-button volume-down"></div>
                <div class="status-bar flex items-center justify-between">
                    <span>9:41</span>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-signal"></i>
                        <i class="fas fa-wifi"></i>
                        <i class="fas fa-battery-full"></i>
                    </div>
                </div>
                <div class="content-area">
                    <!-- 顶部导航 -->
                    <div class="bg-white px-4 py-3 flex items-center justify-between border-b">
                        <div class="flex items-center">
                            <button onclick="window.location.href='/Users/gunavy/Project/TRAE/FCBSAPP/device-management.html'" class="mr-4">
                                <i class="fas fa-arrow-left text-gray-600"></i>
                            </button>
                            <h1 class="text-lg font-semibold">我的康复计划</h1>
                        </div>
                        <button id="editPlanBtn" class="text-purple-500">
                            <i class="fas fa-edit"></i> 编辑
                        </button>
                    </div>

                    <!-- 计划概览 -->
                    <div class="bg-white m-4 rounded-xl p-4 shadow-sm">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-lg font-semibold">产后康复计划</h2>
                            <span class="text-xs text-white bg-green-500 px-2 py-1 rounded-full">AI推荐</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-3">根据您的情况定制的康复训练计划，帮助您恢复身体机能。</p>
                        <div class="mb-2">
                            <div class="flex justify-between text-sm mb-1">
                                <span>完成进度</span>
                                <span class="text-purple-500">30%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 30%"></div>
                            </div>
                        </div>
                        <div class="flex justify-between text-xs text-gray-500 mt-3">
                            <span>开始日期: 2023-06-15</span>
                            <span>预计完成: 2023-07-15</span>
                        </div>
                    </div>

                    <!-- 今日训练 -->
                    <div class="px-4 mb-4">
                        <h2 class="text-lg font-semibold mb-3">今日训练</h2>
                        <div class="bg-white rounded-xl p-4 shadow-sm">
                            <div class="flex items-center justify-between mb-3">
                                <div>
                                    <h3 class="font-medium">盆底肌训练</h3>
                                    <p class="text-xs text-gray-500">3组 × 10次</p>
                                </div>
                                <button class="bg-purple-500 text-white text-sm px-4 py-1.5 rounded-full">
                                    开始
                                </button>
                            </div>
                            <div class="flex items-center justify-between mb-3 pt-3 border-t">
                                <div>
                                    <h3 class="font-medium">腹直肌修复</h3>
                                    <p class="text-xs text-gray-500">2组 × 8次</p>
                                </div>
                                <button class="bg-purple-500 text-white text-sm px-4 py-1.5 rounded-full">
                                    开始
                                </button>
                            </div>
                            <div class="flex items-center justify-between pt-3 border-t">
                                <div>
                                    <h3 class="font-medium">骨盆稳定训练</h3>
                                    <p class="text-xs text-gray-500">2组 × 12次</p>
                                </div>
                                <button class="bg-purple-500 text-white text-sm px-4 py-1.5 rounded-full">
                                    开始
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 训练项目 -->
                    <div id="exerciseList" class="px-4 mb-4">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-lg font-semibold">训练项目</h2>
                            <div id="editControls" class="hidden">
                                <button id="addExerciseBtn" class="text-xs bg-purple-500 text-white px-2 py-1 rounded-full mr-2">
                                    <i class="fas fa-plus"></i> 添加
                                </button>
                                <button id="saveChangesBtn" class="text-xs bg-green-500 text-white px-2 py-1 rounded-full">
                                    <i class="fas fa-check"></i> 保存
                                </button>
                            </div>
                        </div>

                        <!-- 训练项目列表 -->
                        <div class="space-y-3">
                            <!-- 项目1 -->
                            <div class="exercise-card bg-white rounded-xl shadow-sm overflow-hidden" data-id="1">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1518611012118-696072aa579a?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" alt="盆底肌训练" class="w-full h-32 object-cover">
                                    <div class="absolute top-2 right-2 bg-white/80 backdrop-blur-sm rounded-full px-2 py-0.5 text-xs">
                                        10-15分钟
                                    </div>
                                    <div class="drag-handle hidden absolute top-2 left-2 bg-white/80 backdrop-blur-sm rounded-full w-6 h-6 flex items-center justify-center">
                                        <i class="fas fa-grip-lines"></i>
                                    </div>
                                </div>
                                <div class="p-3">
                                    <div class="flex items-center justify-between">
                                        <h3 class="font-medium">盆底肌训练</h3>
                                        <span class="text-xs bg-purple-100 text-purple-600 px-2 py-0.5 rounded-full">核心</span>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">帮助恢复盆底肌力量，预防尿失禁</p>
                                    <div class="flex items-center justify-between mt-2">
                                        <div class="flex items-center">
                                            <span class="text-xs text-gray-500">难度:</span>
                                            <div class="flex ml-1">
                                                <i class="fas fa-circle text-purple-500 text-xs"></i>
                                                <i class="fas fa-circle text-purple-500 text-xs"></i>
                                                <i class="fas fa-circle text-gray-300 text-xs"></i>
                                            </div>
                                        </div>
                                        <button class="delete-btn hidden text-red-500 text-xs">
                                            <i class="fas fa-trash"></i> 删除
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 项目2 -->
                            <div class="exercise-card bg-white rounded-xl shadow-sm overflow-hidden" data-id="2">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" alt="腹直肌修复" class="w-full h-32 object-cover">
                                    <div class="absolute top-2 right-2 bg-white/80 backdrop-blur-sm rounded-full px-2 py-0.5 text-xs">
                                        15-20分钟
                                    </div>
                                    <div class="drag-handle hidden absolute top-2 left-2 bg-white/80 backdrop-blur-sm rounded-full w-6 h-6 flex items-center justify-center">
                                        <i class="fas fa-grip-lines"></i>
                                    </div>
                                </div>
                                <div class="p-3">
                                    <div class="flex items-center justify-between">
                                        <h3 class="font-medium">腹直肌修复</h3>
                                        <span class="text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full">修复</span>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">针对腹直肌分离问题的修复训练</p>
                                    <div class="flex items-center justify-between mt-2">
                                        <div class="flex items-center">
                                            <span class="text-xs text-gray-500">难度:</span>
                                            <div class="flex ml-1">
                                                <i class="fas fa-circle text-purple-500 text-xs"></i>
                                                <i class="fas fa-circle text-purple-500 text-xs"></i>
                                                <i class="fas fa-circle text-purple-500 text-xs"></i>
                                            </div>
                                        </div>
                                        <button class="delete-btn hidden text-red-500 text-xs">
                                            <i class="fas fa-trash"></i> 删除
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 项目3 -->
                            <div class="exercise-card bg-white rounded-xl shadow-sm overflow-hidden" data-id="3">
                                <div class="relative">
                                    <img src="https://images.unsplash.com/photo-1562088287-bde35a1ea917?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" alt="骨盆稳定训练" class="w-full h-32 object-cover">
                                    <div class="absolute top-2 right-2 bg-white/80 backdrop-blur-sm rounded-full px-2 py-0.5 text-xs">
                                        10分钟
                                    </div>
                                    <div class="drag-handle hidden absolute top-2 left-2 bg-white/80 backdrop-blur-sm rounded-full w-6 h-6 flex items-center justify-center">
                                        <i class="fas fa-grip-lines"></i>
                                    </div>
                                </div>
                                <div class="p-3">
                                    <div class="flex items-center justify-between">
                                        <h3 class="font-medium">骨盆稳定训练</h3>
                                        <span class="text-xs bg-green-100 text-green-600 px-2 py-0.5 rounded-full">基础</span>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">改善骨盆稳定性，缓解腰背疼痛</p>
                                    <div class="flex items-center justify-between mt-2">
                                        <div class="flex items-center">
                                            <span class="text-xs text-gray-500">难度:</span>
                                            <div class="flex ml-1">
                                                <i class="fas fa-circle text-purple-500 text-xs"></i>
                                                <i class="fas fa-circle text-gray-300 text-xs"></i>
                                                <i class="fas fa-circle text-gray-300 text-xs"></i>
                                            </div>
                                        </div>
                                        <button class="delete-btn hidden text-red-500 text-xs">
                                            <i class="fas fa-trash"></i> 删除
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 康复建议 -->
                    <div class="px-4 mb-20">
                        <h2 class="text-lg font-semibold mb-3">康复建议</h2>
                        <div class="bg-white rounded-xl p-4 shadow-sm">
                            <div class="flex items-start mb-3">
                                <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-robot text-purple-500"></i>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium">AI建议</h3>
                                    <p class="text-xs text-gray-600 mt-1">根据您的情况，建议您在训练过程中注意以下几点：</p>
                                    <ul class="text-xs text-gray-600 mt-2 space-y-1 list-disc list-inside">
                                        <li>训练前做好充分的热身</li>
                                        <li>如有不适，立即停止训练</li>
                                        <li>保持规律的训练频率，每周至少3次</li>
                                        <li>注意呼吸节奏，避免屏气</li>
                                        <li>训练后适当休息，避免过度疲劳</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="flex items-start pt-3 border-t">
                                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-user-md text-blue-500"></i>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium">专家建议</h3>
                                    <p class="text-xs text-gray-600 mt-1">如需更专业的指导，建议预约专家一对一咨询。</p>
                                    <button class="mt-2 text-xs bg-blue-500 text-white px-3 py-1 rounded-full">
                                        预约专家
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 底部导航栏 -->
                <div class="bottom-tab-bar flex items-center justify-around">
                    <a href="/Users/gunavy/Project/TRAE/FCBSAPP/device-management.html" class="tab-item flex flex-col items-center">
                        <i class="fas fa-mobile-alt text-xl text-gray-400"></i>
                        <span class="text-xs text-gray-400">设备</span>
                    </a>
                    <a href="/Users/gunavy/Project/TRAE/FCBSAPP/health.html" class="tab-item flex flex-col items-center">
                        <i class="fas fa-heartbeat text-xl text-gray-400"></i>
                        <span class="text-xs text-gray-400">健康</span>
                    </a>
                    <a href="/Users/gunavy/Project/TRAE/FCBSAPP/shop.html" class="tab-item flex flex-col items-center">
                        <i class="fas fa-shopping-bag text-xl text-gray-400"></i>
                        <span class="text-xs text-gray-400">商城</span>
                    </a>
                    <a href="/Users/gunavy/Project/TRAE/FCBSAPP/profile.html" class="tab-item flex flex-col items-center">
                        <i class="fas fa-user text-xl text-gray-400"></i>
                        <span class="text-xs text-gray-400">我的</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 为所有标签添加悬停效果
            const allTabs = document.querySelectorAll('.tab-item');
            allTabs.forEach(tab => {
                if (!tab.classList.contains('active')) {
                    tab.addEventListener('mouseover', function() {
                        const icon = this.querySelector('i');
                        const text = this.querySelector('span');
                        if (icon) icon.classList.add('text-purple-400');
                        if (text) text.classList.add('text-purple-400');
                    });
                    
                    tab.addEventListener('mouseout', function() {
                        const icon = this.querySelector('i');
                        const text = this.querySelector('span');
                        if (icon) icon.classList.remove('text-purple-400');
                        if (text) text.classList.remove('text-purple-400');
                    });
                }
            });

            // 编辑模式功能
            const editPlanBtn = document.getElementById('editPlanBtn');
            const editControls = document.getElementById('editControls');
            const exerciseCards = document.querySelectorAll('.exercise-card');
            const dragHandles = document.querySelectorAll('.drag-handle');
            const deleteButtons = document.querySelectorAll('.delete-btn');
            const addExerciseBtn = document.getElementById('addExerciseBtn');
            const saveChangesBtn = document.getElementById('saveChangesBtn');
            
            let isEditMode = false;
            
            // 切换编辑模式
            editPlanBtn.addEventListener('click', function() {
                isEditMode = !isEditMode;
                
                if (isEditMode) {
                    // 进入编辑模式
                    editPlanBtn.innerHTML = '<i class="fas fa-times"></i> 取消';
                    editControls.classList.remove('hidden');
                    
                    // 显示拖动手柄和删除按钮
                    dragHandles.forEach(handle => handle.classList.remove('hidden'));
                    deleteButtons.forEach(btn => btn.classList.remove('hidden'));
                    
                    // 添加编辑模式样式
                    exerciseCards.forEach(card => card.classList.add('edit-mode'));
                } else {
                    // 退出编辑模式
                    exitEditMode();
                }
            });
            
            // 退出编辑模式
            function exitEditMode() {
                editPlanBtn.innerHTML = '<i class="fas fa-edit"></i> 编辑';
                editControls.classList.add('hidden');
                
                // 隐藏拖动手柄和删除按钮
                dragHandles.forEach(handle => handle.classList.add('hidden'));
                deleteButtons.forEach(btn => btn.classList.add('hidden'));
                
                // 移除编辑模式样式
                exerciseCards.forEach(card => card.classList.remove('edit-mode'));
                
                isEditMode = false;
            }
            
            // 保存更改
            saveChangesBtn.addEventListener('click', function() {
                // 这里可以添加保存逻辑，例如发送到服务器
                
                // 显示保存成功提示
                alert('康复计划已更新！');
                
                // 退出编辑模式
                exitEditMode();
            });
            
            // 删除训练项目
            deleteButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const card = this.closest('.exercise-card');
                    if (confirm('确定要删除这个训练项目吗？')) {
                        card.remove();
                    }
                });
            });
            
            // 添加新训练项目
            addExerciseBtn.addEventListener('click', function() {
                const exerciseList = document.querySelector('.space-y-3');
                const newExerciseId = Date.now(); // 使用时间戳作为临时ID
                
                const newExerciseHTML = `
                    <div class="exercise-card bg-white rounded-xl shadow-sm overflow-hidden edit-mode" data-id="${newExerciseId}">
                        <div class="relative">
                            <img src="https://images.unsplash.com/photo-1518310383802-640c2de311b2?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3" alt="新训练项目" class="w-full h-32 object-cover">
                            <div class="absolute top-2 right-2 bg-white/80 backdrop-blur-sm rounded-full px-2 py-0.5 text-xs">
                                10分钟
                            </div>
                            <div class="drag-handle absolute top-2 left-2 bg-white/80 backdrop-blur-sm rounded-full w-6 h-6 flex items-center justify-center">
                                <i class="fas fa-grip-lines"></i>
                            </div>
                        </div>
                        <div class="p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-medium">新训练项目</h3>
                                <span class="text-xs bg-yellow-100 text-yellow-600 px-2 py-0.5 rounded-full">自定义</span>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">点击编辑此训练项目的详细信息</p>
                            <div class="flex items-center justify-between mt-2">
                                <div class="flex items-center">
                                    <span class="text-xs text-gray-500">难度:</span>
                                    <div class="flex ml-1">
                                        <i class="fas fa-circle text-purple-500 text-xs"></i>
                                        <i class="fas fa-circle text-gray-300 text-xs"></i>
                                        <i class="fas fa-circle text-gray-300 text-xs"></i>
                                    </div>
                                </div>
                                <button class="delete-btn text-red-500 text-xs">
                                    <i class="fas fa-trash"></i> 删除
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                // 添加新元素
                exerciseList.insertAdjacentHTML('beforeend', newExerciseHTML);
                
                // 为新添加的删除按钮绑定事件
                const newDeleteBtn = exerciseList.querySelector(`[data-id="${newExerciseId}"] .delete-btn`);
                newDeleteBtn.addEventListener('click', function() {
                    const card = this.closest('.exercise-card');
                    if (confirm('确定要删除这个训练项目吗？')) {
                        card.remove();
                    }
                });
            });
            
            // 从本地存储获取用户信息并更新计划
            const userInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');
            if (userInfo.postpartumPeriod) {
                // 根据用户信息更新计划内容
                updatePlanBasedOnUserInfo(userInfo);
            }
            
            // 根据用户信息更新计划
            function updatePlanBasedOnUserInfo(info) {
                // 这里可以根据用户信息调整计划内容
                // 例如，根据产后时间调整训练强度
                const planTitle = document.querySelector('.bg-white.m-4.rounded-xl.p-4.shadow-sm h2');
                if (planTitle) {
                    planTitle.textContent = `产后${info.postpartumPeriod}康复计划`;
                }
                
                // 根据症状调整训练项目
                if (info.symptoms && info.symptoms.length > 0) {
                    // 更新AI建议内容
                    const aiAdvice = document.querySelector('.text-xs.text-gray-600.mt-2.space-y-1.list-disc.list-inside');
                    if (aiAdvice) {
                        let adviceHTML = '';
                        
                        if (info.symptoms.includes('盆底肌无力')) {
                            adviceHTML += '<li>建议重点加强盆底肌训练，每天进行2-3次</li>';
                        }
                        
                        if (info.symptoms.includes('腰背疼痛')) {
                            adviceHTML += '<li>训练时注意保持正确姿势，避免加重腰背负担</li>';
                        }
                        
                        if (info.symptoms.includes('腹直肌分离')) {
                            adviceHTML += '<li>避免传统仰卧起坐等加重腹直肌分离的动作</li>';
                        }
                        
                        if (info.symptoms.includes('尿失禁')) {
                            adviceHTML += '<li>日常生活中注意控制尿频，配合盆底肌训练</li>';
                        }
                        
                        // 添加通用建议
                        adviceHTML += '<li>训练前做好充分的热身</li>';
                        adviceHTML += '<li>如有不适，立即停止训练</li>';
                        adviceHTML += '<li>保持规律的训练频率，每周至少3次</li>';
                        
                        aiAdvice.innerHTML = adviceHTML;
                    }
                }
                
                // 根据运动频率调整训练计划
                if (info.exerciseFrequency) {
                    let frequency = '';
                    let intensity = '';
                    
                    switch(info.exerciseFrequency) {
                        case '几乎不运动':
                            frequency = '每周2-3次';
                            intensity = '低强度';
                            break;
                        case '每周1-2次':
                            frequency = '每周3-4次';
                            intensity = '低到中等强度';
                            break;
                        case '每周3-4次':
                            frequency = '每周4-5次';
                            intensity = '中等强度';
                            break;
                        case '每周5次以上':
                            frequency = '每周5-6次';
                            intensity = '中高强度';
                            break;
                    }
                    
                    // 更新训练频率建议
                    const adviceList = document.querySelector('.text-xs.text-gray-600.mt-2.space-y-1.list-disc.list-inside');
                    if (adviceList) {
                        const frequencyItem = document.createElement('li');
                        frequencyItem.textContent = `建议${frequency}，${intensity}训练`;
                        adviceList.appendChild(frequencyItem);
                    }
                }
                
                // 根据疼痛程度调整训练强度
                if (info.painLevel) {
                    let painAdvice = '';
                    
                    if (info.painLevel.includes('0-2')) {
                        painAdvice = '您的疼痛程度较轻，可以适当增加训练强度';
                    } else if (info.painLevel.includes('3-5')) {
                        painAdvice = '训练时如果疼痛加剧，请立即停止并休息';
                    } else if (info.painLevel.includes('6-8')) {
                        painAdvice = '建议在专业人士指导下进行训练，避免加重疼痛';
                    } else if (info.painLevel.includes('9-10')) {
                        painAdvice = '请先咨询医生，在疼痛缓解后再开始训练';
                    }
                    
                    // 添加疼痛相关建议
                    const adviceList = document.querySelector('.text-xs.text-gray-600.mt-2.space-y-1.list-disc.list-inside');
                    if (adviceList && painAdvice) {
                        const painItem = document.createElement('li');
                        painItem.textContent = painAdvice;
                        adviceList.appendChild(painItem);
                    }
                }
                
                // 根据用户目标调整训练计划
                if (info.goals && info.goals.length > 0) {
                    // 更新计划描述
                    const planDescription = document.querySelector('.bg-white.m-4.rounded-xl.p-4.shadow-sm p.text-sm.text-gray-600.mb-3');
                    if (planDescription) {
                        let goalText = '根据您的目标';
                        
                        if (info.goals.includes('缓解疼痛')) {
                            goalText += '（缓解疼痛）';
                        }
                        
                        if (info.goals.includes('增强肌肉力量')) {
                            goalText += '（增强肌肉力量）';
                        }
                        
                        if (info.goals.includes('改善姿势')) {
                            goalText += '（改善姿势）';
                        }
                        
                        if (info.goals.includes('恢复身材')) {
                            goalText += '（恢复身材）';
                        }
                        
                        if (info.goals.includes('提高生活质量')) {
                            goalText += '（提高生活质量）';
                        }
                        
                        goalText += '定制的康复训练计划，帮助您恢复身体机能。';
                        planDescription.textContent = goalText;
                    }
                }
                
                // 设置计划日期
                const today = new Date();
                const startDate = today.toISOString().split('T')[0];
                
                // 根据产后时间设置预计完成日期
                let endDate = new Date(today);
                if (info.postpartumPeriod === '1个月内') {
                    endDate.setDate(today.getDate() + 30); // 1个月计划
                } else if (info.postpartumPeriod === '1-3个月') {
                    endDate.setDate(today.getDate() + 45); // 1.5个月计划
                } else if (info.postpartumPeriod === '3-6个月') {
                    endDate.setDate(today.getDate() + 60); // 2个月计划
                } else {
                    endDate.setDate(today.getDate() + 90); // 3个月计划
                }
                
                // 更新日期显示
                const dateInfo = document.querySelector('.flex.justify-between.text-xs.text-gray-500.mt-3');
                if (dateInfo) {
                    dateInfo.innerHTML = `
                        <span>开始日期: ${startDate}</span>
                        <span>预计完成: ${endDate.toISOString().split('T')[0]}</span>
                    `;
                }
            }
        });
    </script>
</body>
</html>